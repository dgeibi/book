<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>1.&#xA0;&#x5F15;&#x8A00;</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="Linux C&#x7F16;&#x7A0B;&#x4E00;&#x7AD9;&#x5F0F;&#x5B66;&#x4E60;"><link rel="up" href="ch30.html" title="&#x7B2C;&#xA0;30&#xA0;&#x7AE0;&#xA0;&#x8FDB;&#x7A0B;"><link rel="prev" href="ch30.html" title="&#x7B2C;&#xA0;30&#xA0;&#x7AE0;&#xA0;&#x8FDB;&#x7A0B;"><link rel="next" href="ch30s02.html" title="2.&#xA0;&#x73AF;&#x5883;&#x53D8;&#x91CF;"><meta name="viewport" content="width=device-width, initial-scale=1"></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">1.&#xA0;&#x5F15;&#x8A00;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch30.html">&#x4E0A;&#x4E00;&#x9875;</a>&#xA0;</td><th width="60%" align="center">&#x7B2C;&#xA0;30&#xA0;&#x7AE0;&#xA0;&#x8FDB;&#x7A0B;</th><td width="20%" align="right">&#xA0;<a accesskey="n" href="ch30s02.html">&#x4E0B;&#x4E00;&#x9875;</a></td></tr></tbody></table><hr></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2865382"></a>1.&#xA0;&#x5F15;&#x8A00;</h2></div></div></div><p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x5728;&#x5185;&#x6838;&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x63A7;&#x5236;&#x5757;&#xFF08;PCB&#xFF09;&#x6765;&#x7EF4;&#x62A4;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#xFF0C;Linux&#x5185;&#x6838;&#x7684;&#x8FDB;&#x7A0B;&#x63A7;&#x5236;&#x5757;&#x662F;<code class="literal">task_struct</code>&#x7ED3;&#x6784;&#x4F53;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5168;&#x9762;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5176;&#x4E2D;&#x90FD;&#x6709;&#x54EA;&#x4E9B;&#x4FE1;&#x606F;&#x3002;</p><div class="itemizedlist"><ul type="disc"><li><p>&#x8FDB;&#x7A0B;id&#x3002;&#x7CFB;&#x7EDF;&#x4E2D;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x6709;&#x552F;&#x4E00;&#x7684;id&#xFF0C;&#x5728;C&#x8BED;&#x8A00;&#x4E2D;&#x7528;<code class="literal">pid_t</code>&#x7C7B;&#x578B;&#x8868;&#x793A;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x8D1F;&#x6574;&#x6570;&#x3002;</p></li><li><p>&#x8FDB;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6709;&#x8FD0;&#x884C;&#x3001;&#x6302;&#x8D77;&#x3001;&#x505C;&#x6B62;&#x3001;&#x50F5;&#x5C38;&#x7B49;&#x72B6;&#x6001;&#x3002;</p></li><li><p>&#x8FDB;&#x7A0B;&#x5207;&#x6362;&#x65F6;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x548C;&#x6062;&#x590D;&#x7684;&#x4E00;&#x4E9B;CPU&#x5BC4;&#x5B58;&#x5668;&#x3002;</p></li><li><p>&#x63CF;&#x8FF0;&#x865A;&#x62DF;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x7684;&#x4FE1;&#x606F;&#x3002;</p></li><li><p>&#x63CF;&#x8FF0;&#x63A7;&#x5236;&#x7EC8;&#x7AEF;&#x7684;&#x4FE1;&#x606F;&#x3002;</p></li><li><p>&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF08;Current Working Directory&#xFF09;<a id="id2865421" class="indexterm"></a>&#x3002;</p></li><li><p><code class="literal">umask</code>&#x63A9;&#x7801;&#x3002;</p></li><li><p>&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x8868;&#xFF0C;&#x5305;&#x542B;&#x5F88;&#x591A;&#x6307;&#x5411;<code class="literal">file</code>&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x6307;&#x9488;&#x3002;</p></li><li><p>&#x548C;&#x4FE1;&#x53F7;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x3002;</p></li><li><p>&#x7528;&#x6237;id&#x548C;&#x7EC4;id&#x3002;</p></li><li><p>&#x63A7;&#x5236;&#x7EC8;&#x7AEF;&#x3001;Session&#x548C;&#x8FDB;&#x7A0B;&#x7EC4;&#x3002;</p></li><li><p>&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x4E0A;&#x9650;&#xFF08;Resource Limit&#xFF09;<a id="id2865469" class="indexterm"></a>&#x3002;</p></li></ul></div><p>&#x76EE;&#x524D;&#x8BFB;&#x8005;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x7406;&#x89E3;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x5728;&#x968F;&#x540E;&#x51E0;&#x7AE0;&#x4E2D;&#x8BB2;&#x5230;&#x67D0;&#x4E00;&#x9879;&#x65F6;&#x4F1A;&#x518D;&#x6B21;&#x63D0;&#x9192;&#x8BFB;&#x8005;&#x5B83;&#x662F;&#x4FDD;&#x5B58;&#x5728;PCB&#x4E2D;&#x7684;&#x3002;</p><p><code class="literal">fork</code>&#x548C;<code class="literal">exec</code>&#x662F;&#x672C;&#x7AE0;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x3002;<code class="literal">fork</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x6839;&#x636E;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x590D;&#x5236;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x8FDB;&#x7A0B;&#xFF0C;&#x539F;&#x6765;&#x7684;&#x8FDB;&#x7A0B;&#x79F0;&#x4E3A;&#x7236;&#x8FDB;&#x7A0B;&#xFF08;Parent Process&#xFF09;<a id="id2865505" class="indexterm"></a>&#xFF0C;&#x65B0;&#x8FDB;&#x7A0B;&#x79F0;&#x4E3A;&#x5B50;&#x8FDB;&#x7A0B;&#xFF08;Child Process&#xFF09;<a id="id2865513" class="indexterm"></a>&#x3002;&#x7CFB;&#x7EDF;&#x4E2D;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x7740;&#x5F88;&#x591A;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x8FDB;&#x7A0B;&#x90FD;&#x662F;&#x4ECE;&#x6700;&#x521D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5F00;&#x59CB;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x590D;&#x5236;&#x51FA;&#x6765;&#x7684;&#x3002;&#x5728;Shell&#x4E0B;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;Shell&#x8FDB;&#x7A0B;&#x5728;&#x8BFB;&#x53D6;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#x4F1A;&#x8C03;&#x7528;<code class="literal">fork</code>&#x590D;&#x5236;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Shell&#x8FDB;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x7684;Shell&#x8FDB;&#x7A0B;&#x8C03;&#x7528;<code class="literal">exec</code>&#x6267;&#x884C;&#x65B0;&#x7684;&#x7A0B;&#x5E8F;&#x3002;</p><p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#xFF0C;&#x6210;&#x4E3A;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x7684;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5F00;&#x591A;&#x4E2A;&#x7EC8;&#x7AEF;&#x7A97;&#x53E3;&#x8FD0;&#x884C;<code class="literal">/bin/bash</code>&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5728;&#x8C03;&#x7528;<code class="literal">exec</code>&#x524D;&#x540E;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x6267;&#x884C;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F8B;&#x5982;&#x5728;Shell&#x63D0;&#x793A;&#x7B26;&#x4E0B;&#x8F93;&#x5165;&#x547D;&#x4EE4;<code class="literal">ls</code>&#xFF0C;&#x9996;&#x5148;<code class="literal">fork</code>&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD9;&#x65F6;&#x5B50;&#x8FDB;&#x7A0B;&#x4ECD;&#x5728;&#x6267;&#x884C;<code class="literal">/bin/bash</code>&#x7A0B;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x5B50;&#x8FDB;&#x7A0B;&#x8C03;&#x7528;<code class="literal">exec</code>&#x6267;&#x884C;&#x65B0;&#x7684;&#x7A0B;&#x5E8F;<code class="literal">/bin/ls</code>&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x3002;</p><div class="figure"><a id="id2865589"></a><p class="title"><b>&#x56FE;&#xA0;30.1.&#xA0;fork/exec</b></p><div class="figure-contents"><div><img src="images/process.forkexec.png" alt="fork/exec"></div></div></div><br class="figure-break"><p>&#x5728;<a class="xref" href="ch28s03.html#io.open">&#x7B2C;&#xA0;3&#xA0;&#x8282; &#x201C;open/close&#x201D;</a>&#x4E2D;&#x6211;&#x4EEC;&#x505A;&#x8FC7;&#x4E00;&#x4E2A;&#x5B9E;&#x9A8C;&#xFF1A;&#x7528;<code class="literal">umask</code>&#x547D;&#x4EE4;&#x8BBE;&#x7F6E;Shell&#x8FDB;&#x7A0B;&#x7684;<code class="literal">umask</code>&#x63A9;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;<code class="literal">a.out</code>&#xFF0C;&#x7ED3;&#x679C;<code class="literal">a.out</code>&#x8FDB;&#x7A0B;&#x7684;<code class="literal">umask</code>&#x63A9;&#x7801;&#x4E5F;&#x548C;Shell&#x8FDB;&#x7A0B;&#x4E00;&#x6837;&#x3002;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;<code class="literal">a.out</code>&#x8FDB;&#x7A0B;&#x662F;Shell&#x8FDB;&#x7A0B;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;PCB&#x662F;&#x6839;&#x636E;&#x7236;&#x8FDB;&#x7A0B;&#x590D;&#x5236;&#x800C;&#x6765;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x4E2D;&#x7684;<code class="literal">umask</code>&#x63A9;&#x7801;&#x4E5F;&#x548C;&#x7236;&#x8FDB;&#x7A0B;&#x4E00;&#x6837;&#x3002;&#x540C;&#x6837;&#x9053;&#x7406;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E5F;&#x548C;&#x7236;&#x8FDB;&#x7A0B;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;<code class="literal">cd</code>&#x547D;&#x4EE4;&#x6539;&#x53D8;Shell&#x8FDB;&#x7A0B;&#x7684;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x7528;<code class="literal">ls</code>&#x547D;&#x4EE4;&#x5217;&#x51FA;&#x90A3;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#xFF0C;<code class="literal">ls</code>&#x8FDB;&#x7A0B;&#x5176;&#x5B9E;&#x662F;&#x5728;&#x5217;&#x81EA;&#x5DF1;&#x7684;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x662F;Shell&#x8FDB;&#x7A0B;&#x7684;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;<code class="literal">ls</code>&#x8FDB;&#x7A0B;&#x7684;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x6B63;&#x597D;&#x548C;Shell&#x8FDB;&#x7A0B;&#x76F8;&#x540C;&#x3002;&#x6709;&#x4E00;&#x4E2A;&#x4F8B;&#x5916;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;PCB&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;id&#x548C;&#x7236;&#x8FDB;&#x7A0B;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a accesskey="p" href="ch30.html">&#x4E0A;&#x4E00;&#x9875;</a>&#xA0;</td><td width="20%" align="center"><a accesskey="u" href="ch30.html">&#x4E0A;&#x4E00;&#x7EA7;</a></td><td width="40%" align="right">&#xA0;<a accesskey="n" href="ch30s02.html">&#x4E0B;&#x4E00;&#x9875;</a></td></tr><tr><td width="40%" align="left" valign="top">&#x7B2C;&#xA0;30&#xA0;&#x7AE0;&#xA0;&#x8FDB;&#x7A0B;&#xA0;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#x8D77;&#x59CB;&#x9875;</a></td><td width="40%" align="right" valign="top">&#xA0;2.&#xA0;&#x73AF;&#x5883;&#x53D8;&#x91CF;</td></tr></tbody></table></div>
</body></html>