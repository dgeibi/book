<!--?xml version="1.0" encoding="UTF-8" standalone="no"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>5.&#xA0;&#x5E38;&#x7528;&#x7684;make&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="Linux C&#x7F16;&#x7A0B;&#x4E00;&#x7AD9;&#x5F0F;&#x5B66;&#x4E60;"><link rel="up" href="ch22.html" title="&#x7B2C;&#xA0;22&#xA0;&#x7AE0;&#xA0;Makefile&#x57FA;&#x7840;"><link rel="prev" href="ch22s04.html" title="4.&#xA0;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x5934;&#x6587;&#x4EF6;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;"><link rel="next" href="ch23.html" title="&#x7B2C;&#xA0;23&#xA0;&#x7AE0;&#xA0;&#x6307;&#x9488;"><meta name="viewport" content="width=device-width, initial-scale=1"></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tbody><tr><th colspan="3" align="center">5.&#xA0;&#x5E38;&#x7528;&#x7684;<code class="literal">make</code>&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch22s04.html">&#x4E0A;&#x4E00;&#x9875;</a>&#xA0;</td><th width="60%" align="center">&#x7B2C;&#xA0;22&#xA0;&#x7AE0;&#xA0;Makefile&#x57FA;&#x7840;</th><td width="20%" align="right">&#xA0;<a accesskey="n" href="ch23.html">&#x4E0B;&#x4E00;&#x9875;</a></td></tr></tbody></table><hr></div><div class="sect1" lang="zh-cn" xml:lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2806383"></a>5.&#xA0;&#x5E38;&#x7528;&#x7684;<code class="literal">make</code>&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</h2></div></div></div><p><code class="literal">-n</code>&#x9009;&#x9879;&#x53EA;&#x6253;&#x5370;&#x8981;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x771F;&#x7684;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x6709;&#x52A9;&#x4E8E;&#x6211;&#x4EEC;&#x68C0;&#x67E5;Makefile&#x5199;&#x5F97;&#x662F;&#x5426;&#x6B63;&#x786E;&#xFF0C;&#x7531;&#x4E8E;Makefile&#x4E0D;&#x662F;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x7528;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x770B;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF0C;&#x786E;&#x8BA4;&#x65E0;&#x8BEF;&#x4E86;&#x518D;&#x771F;&#x6B63;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x3002;</p><p><code class="literal">-C</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5207;&#x6362;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x6267;&#x884C;&#x90A3;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;Makefile&#xFF0C;&#x6BD4;&#x5982;&#x5148;&#x9000;&#x5230;&#x4E0A;&#x4E00;&#x7EA7;&#x76EE;&#x5F55;&#x518D;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x7684;Makefile&#xFF08;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x90FD;&#x653E;&#x5728;<code class="literal">testmake</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF09;&#xFF1A;</p><pre class="screen">$ cd ..
$ make -C testmake
make: Entering directory `/home/akaedu/testmake&apos;
cc    -c -o main.o main.c
cc    -c -o stack.o stack.c
cc    -c -o maze.o maze.c
gcc main.o stack.o maze.o -o main
make: Leaving directory `/home/akaedu/testmake&apos;</pre><p>&#x4E00;&#x4E9B;&#x89C4;&#x6A21;&#x8F83;&#x5927;&#x7684;&#x9879;&#x76EE;&#x4F1A;&#x628A;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x5757;&#x6216;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x653E;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x6BCF;&#x4E2A;&#x5B50;&#x76EE;&#x5F55;&#x4E0B;&#x90FD;&#x5199;&#x4E00;&#x4E2A;&#x8BE5;&#x76EE;&#x5F55;&#x7684;Makefile&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4E00;&#x4E2A;&#x603B;&#x7684;Makefile&#x4E2D;&#x7528;<code class="literal">make -C</code>&#x547D;&#x4EE4;&#x6267;&#x884C;&#x6BCF;&#x4E2A;&#x5B50;&#x76EE;&#x5F55;&#x4E0B;&#x7684;Makefile&#x3002;&#x4F8B;&#x5982;Linux&#x5185;&#x6838;&#x6E90;&#x4EE3;&#x7801;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x6709;<code class="literal">Makefile</code>&#xFF0C;&#x5B50;&#x76EE;&#x5F55;<code class="literal">fs</code>&#x3001;<code class="literal">net</code>&#x7B49;&#x4E5F;&#x6709;&#x5404;&#x81EA;&#x7684;<code class="literal">Makefile</code>&#xFF0C;&#x4E8C;&#x7EA7;&#x5B50;&#x76EE;&#x5F55;<code class="literal">fs/ramfs</code>&#x3001;<code class="literal">net/ipv4</code>&#x7B49;&#x4E5F;&#x6709;&#x5404;&#x81EA;&#x7684;<code class="literal">Makefile</code>&#x3002;</p><p>&#x5728;<code class="literal">make</code>&#x547D;&#x4EE4;&#x884C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;<code class="literal">=</code>&#x6216;<code class="literal">:=</code>&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x6B21;&#x7F16;&#x8BD1;&#x6211;&#x60F3;&#x52A0;&#x8C03;&#x8BD5;&#x9009;&#x9879;<code class="literal">-g</code>&#xFF0C;&#x4F46;&#x6211;&#x4E0D;&#x60F3;&#x6BCF;&#x6B21;&#x7F16;&#x8BD1;&#x90FD;&#x52A0;<code class="literal">-g</code>&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x5B9A;&#x4E49;<code class="literal">CFLAGS</code>&#x53D8;&#x91CF;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x4FEE;&#x6539;Makefile&#x7F16;&#x8BD1;&#x5B8C;&#x4E86;&#x518D;&#x6539;&#x56DE;&#x6765;&#xFF1A;</p><pre class="screen">$ make CFLAGS=-g
cc -g   -c -o main.o main.c
cc -g   -c -o stack.o stack.c
cc -g   -c -o maze.o maze.c
gcc main.o stack.o maze.o -o main</pre><p>&#x5982;&#x679C;&#x5728;Makefile&#x4E2D;&#x4E5F;&#x5B9A;&#x4E49;&#x4E86;<code class="literal">CFLAGS</code>&#x53D8;&#x91CF;&#xFF0C;&#x5219;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x503C;&#x8986;&#x76D6;Makefile&#x4E2D;&#x7684;&#x503C;&#x3002;</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tbody><tr><td width="40%" align="left"><a accesskey="p" href="ch22s04.html">&#x4E0A;&#x4E00;&#x9875;</a>&#xA0;</td><td width="20%" align="center"><a accesskey="u" href="ch22.html">&#x4E0A;&#x4E00;&#x7EA7;</a></td><td width="40%" align="right">&#xA0;<a accesskey="n" href="ch23.html">&#x4E0B;&#x4E00;&#x9875;</a></td></tr><tr><td width="40%" align="left" valign="top">4.&#xA0;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x5934;&#x6587;&#x4EF6;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xA0;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#x8D77;&#x59CB;&#x9875;</a></td><td width="40%" align="right" valign="top">&#xA0;&#x7B2C;&#xA0;23&#xA0;&#x7AE0;&#xA0;&#x6307;&#x9488;</td></tr></tbody></table></div>
</body></html>